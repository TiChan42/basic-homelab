all:
  vars:
    # Shared SSH defaults for all managed hosts
    ansible_user: root
    ansible_ssh_private_key_file: /root/.ssh/id_rsa
    ansible_ssh_common_args: '-o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null'
  children:
    webservers:
      vars:
        # Defaults for all webservers (can be overridden per host)
        webserver_container_memory: "512"
        webserver_container_cores: "1"
        webserver_container_rootfs: "{{ default_storage }}:8"
        webserver_node_version: "22"
        webserver_build_command: "npm run build"
      hosts:
        desktop-background-webserver:
          ansible_host: "192.168.1.52"
          webserver_container_id: "3003"
          webserver_port: "3003"
          webserver_git_repo: "https://github.com/shape-z/windowmesh.git"
          webserver_git_branch: "main"
        # ---------------------------------------------------------------
        # Example: Add another webserver by uncommenting below
        # ---------------------------------------------------------------
        # my-portfolio:
        #   ansible_host: "192.168.1.53"
        #   webserver_container_id: "3004"
        #   webserver_port: "3004"
        #   webserver_git_repo: "https://github.com/user/portfolio.git"
        #   webserver_git_branch: "main"
        #   webserver_build_command: "npm run build"  # override default

    mqtt_brokers:
      hosts:
        mqtt-broker:
          ansible_host: "192.168.1.60"
          mqtt_container_id: "4001"
        # ---------------------------------------------------------------
        # Example: Add another MQTT broker by uncommenting below
        # ---------------------------------------------------------------
        # mqtt-broker-2:
        #   ansible_host: "192.168.1.61"
        #   mqtt_container_id: "4002"

    homeassistant:
      hosts:
        homeassistant:
          ansible_host: "192.168.1.50"
          ha_vm_id: "5001"
          ha_vm_name: "homeassistant"