// ============================================
// Node-RED Settings â€“ managed by Ansible
// ============================================
module.exports = {
    // --- Flow storage ---
    flowFile: 'flows.json',
    flowFilePretty: true,

    // --- User directory ---
    userDir: '{{ nodered_data_dir }}',

    // --- Credential encryption ---
    credentialSecret: '{{ nodered_credential_secret }}',

    // --- Admin Authentication ---
    adminAuth: {
        type: "credentials",
        users: [
            {
                username: "{{ nodered_admin_user }}",
                password: "{{ nodered_admin_password | password_hash('bcrypt') }}",
                permissions: "*"
            },
            {
                username: "{{ default_user }}",
                password: "{{ default_password | password_hash('bcrypt') }}",
                permissions: "read"
            }
        ]
    },

    // --- Network ---
    uiPort: {{ service_backend_port }},
    uiHost: "0.0.0.0",

    // --- Diagnostics ---
    diagnostics: {
        enabled: true,
        ui: true,
    },

    // --- Logging ---
    logging: {
        console: {
            level: "info",
            metrics: false,
            audit: false
        }
    },

    // --- Persistent context storage (survives restarts) ---
    contextStorage: {
        default: {
            module: "localfilesystem",
            config: {
                dir: "{{ nodered_data_dir }}/context"
            }
        }
    },

    exportGlobalContextKeys: false,

    // --- Editor ---
    editorTheme: {
        projects: {
            enabled: false
        },
        tours: false,
    },

    // --- Function nodes ---
    functionGlobalContext: {
    },

    functionExternalModules: true,
}
